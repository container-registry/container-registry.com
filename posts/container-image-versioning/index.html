<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Container Image Versioning - Container Registry</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=title property="og:title" content="Container Image Versioning"><meta name=tags content="Best practices,Container Images,Image tags,Best practices"><meta name=twitter:title content="Container Image Versioning"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ContainerRgstry"><meta name=twitter:creator content="@vad1mo"><meta name=twitter:image property="og:image" content="https://container-registry.com/posts/posts/container-image-versioning/alex-wong-l5Tzv1alcps-unsplash.jpg"><link rel=icon href=https://container-registry.com/favicon.png><link rel=apple-touch-icon sizes=180x180 href=https://container-registry.com//favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://container-registry.com//favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://container-registry.com//favicon/favicon-16x16.png><link rel=manifest href=https://container-registry.com//favicon/site.webmanifest><link rel=mask-icon href=https://container-registry.com//favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=https://container-registry.com//favicon/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="https://container-registry.com//favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;500&family=Open+Sans&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.min.1d56f504204e4456fd1c9f0e1deb46c7664b4c334ed7dd3d8d495f7189985131.css><script>(function(b,d,e,a,g){b[a]=b[a]||[],b[a].push({'gtm.start':(new Date).getTime(),event:'gtm.js'});var f=d.getElementsByTagName(e)[0],c=d.createElement(e),h=a!='dataLayer'?'&l='+a:'';c.async=!0,c.src='https://www.googletagmanager.com/gtm.js?id='+g+h,f.parentNode.insertBefore(c,f)})(window,document,'script','dataLayer','GTM-P2NXZV4')</script></head><body class="page page-posts-single"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2NXZV4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-documentation><a href=/docs/><span>Documentation</span></a></li><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-blog><a href=/posts/><span>Blog</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></li></ul></div><div id=header class="header header-fixed"><div class=container><div class=logos><div class=logo><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo-white.svg></a></div><div class=logo-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo-white.svg></a></div></div><div class=main-menu><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a><li class=menu-item-documentation><a href=/docs/><span>Documentation</span></a><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a><li class=menu-item-about><a href=/about/><span>About</span></a><li class=menu-item-blog><a href=/posts/><span>Blog</span></a><li class=menu-item-contact><a href=/contact/><span>Contact</span></a><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></ul></div><div id=toggle-main-menu-mobile class=menu-trigger><button class=hamburger>Menu</button></div></div></div><div id=wrapper class=wrapper><div class="hero hero-set-height" style=height:500px><div class=hero-image style="background-image:url(/posts/container-image-versioning/alex-wong-l5Tzv1alcps-unsplash.jpg),linear-gradient( to right,#00374D,#d03808 );background-blend-mode:overlay"><div class=container><div class=hero-text><h1 class=mb-1 style=color:#fff>Container Image Versioning</h1><p style=color:#fff>Best practices for Image Tagging</p></div></div></div></div><div class="strip strip-white"><div class="container pt-4 pt-md-10 pb-4 pb-md-10"><div class="row justify-content-start"><div class="col-12 col-md-10 col-lg-8 col-xl-7"><div class="post post-single"><div class="content pb-5"><p>Containers are fundamental to Enterprise digital transformation using cloud-native technologies. Organizations need to build container release management, governance, and monitoring practices to effectively utilize their cloud-native infrastructure. These practices are based on the principle of identifying a changeset(s). Traditionally this has been done with application release versions. Versions yield the following benefits :</p><ul><li>Track upcoming changes with a new version.</li><li>Build governance with changelogs of the new versions</li><li>Monitor the released version</li><li>Rollback to the older version in case of issues.</li></ul><p>In summary, versioning provides the capability to uniquely identify service artefacts along with the corresponding features. But containers do not offer features, instead, they enable a runtime to executed the service artefacts. It is, therefore, possible to version them in a variety of ways. The article presents the various ways our customers version the images and concludes with an opinionated approach to container versioning.</p><h1 id=image-lookup>Image Lookup</h1><p>Identifying artefacts is fundamental to release management. The container specification defines the following attributes for identifying images. You can use either of the ways to lookup images and deploy containers.</p><h2 id=image-ids>Image IDs</h2><p>Container images do not have versions, but they have unique ids known as digests. The digest is computed from the bytes in the image. Container specification provides a reference of the various supported algorithms for digest computation.</p><p>Additional to the image identification, the digest also serves the purpose of image verification. You can recalculate the digest using image data and verify that the contents have not been modified.</p><h2 id=image-tags>Image Tags</h2><p>Image tags are named references to an image version at a specific point in time. Tags allow easy lookup of image revisions by using human-readable strings. But tags are mutable references, so the image represented by the tag might change over time.</p><p>Additionally, tags can be used to convey helpful information about a specific image version. It can be used to correlate the image with its underlying service artefacts. It can also be used for specifying supported architectures and applicable environments.</p><h1 id=container-versioning-strategy>Container Versioning strategy</h1><p>Container tags are easy to reference but are challenging to operate. The mutability of tags creates the risk of deploying wrong containers in production which can cause a myriad of issues, like releasing untested features, broken APIs, bypass security checks, productions failures, etc. Thus organizations need an effective strategy that can work for their specific use cases.</p><p>Part of an engineering team&rsquo;s adoption of container technology is to determine what type of strategy they will use for image tagging. Integration with CI/CD pipelines can be made easier by deciding a strategy up-front and following that standard.</p><h2 id=use-image-digest>Use Image Digest</h2><p>The ability to change image tags is useful and convenient in many situations, but it can also pose risks and challenges if left unmanaged. You can avoid these challenges with deterministic and repeatable image identification by using digests instead of tags.</p><h2 id=use-gitcommit>Use GitCommit</h2><p>Container images are often built using docker files kept in your source control. Every time there is a commit in the application or the docker file the image gets generated. Teams can tag the generated images using the short git hash to trace back the changes in a robust and reliable manner.</p><h2 id=use-semver>Use SemVer</h2><p>Almost all applications follow <a href=https://semver.org/>Semantic Versioning</a>, also known as SemVer, for their release management. It is ideal for distributing applications as it is widely understood. Creating docker images based on the underlying service version is a great way to identify it. You can build the following strategy :</p><ul><li><strong>major.minor.patch</strong> (e.g. <code>2.3.4</code>) is an immutable tag as the service version <code>2.3.4</code> is immutable. The tag indicates the container contains only fixes that are backward compatible with 2.3 version.</li><li><strong>major.minor</strong> (e.g. <code>2.3</code>) is a mutable tag as there can be many <code>2.3.x</code> releases. The tag indicates the container contains new features and fixes that are backward compatible with version 2.</li><li><strong>major</strong> (e.g. <code>2</code>) is a mutable tag as there can be many <code>2.x</code> releases. The tag indicates the container provides new features and changes for a new service version.</li></ul><h2 id=use-other-unique-identifiers>Use Other Unique Identifiers</h2><p>Unique identifiers allow users to tag each image with immutable references. There are several ways to generate unique tags for an image, this includes:</p><ul><li><strong>Datetime stamp</strong> — While used often, a lack of correlation to the included changeset(s) for that container image&rsquo;s release makes other options more attractive.</li><li><strong>Build ID</strong> — Using the data provided by your CICD system, the Build ID allows for a method to denote what build was responsible for that version of the container image.</li></ul><h2 id=canonical-names--rolling-tags>Canonical Names / Rolling tags</h2><p>Several teams use aliases or common names to identify images. But these tags are not descriptive and auditable. They can not get you back to a build, and the contents of the build. So, it’s hard to tell exactly what you’ll get when you pull the tag, and it could change at any time. Following are the most commonly used tag names :</p><ul><li><strong>latest</strong>: The tag implies that the image contains the most recent version of the service. The image can be potentially unstable and still undergoing testing, so it should not be used for production environments.</li><li><strong>stable</strong>: The tag implies that the contents of that image are stable and safe to deploy to production environments and be consumed by downstream containers in orchestrated environments.</li></ul><p>A caveat of using this methodology is a lack of ability to easily roll back to a prior version. Since all releases are denoted as &ldquo;Stable,&rdquo; those that are replaced with the newest version are in a semi-archival state. While still usable, they may not be as accessible for easy image orchestration as other below-mentioned methods.</p><h2 id=multiple-tags>Multiple Tags</h2><p>You can observe this concept applied to almost all popular open source container images on Docker Hub. Their images will have unique tags as well as Canonical Tags. Below is the screenshot of the <a href=https://hub.docker.com/_/nginx>NGINX</a> tag descriptions on Docker Hub.</p><p><img src=/posts/container-image-versioning/nginx-dockerhub.png alt="Nginx DockerHub Images"></p><p>Each row in the list refers to a different image of NGINX, probably containing a different extension or application version. For example, the first row has the tags <code>1.19.6</code>, <code>mainline</code>, <code>1</code>, <code>1.19</code> and <code>latest</code>. All the tags point to the same image.</p><p>Images are also tagged with NGINX release versions as <code>1.19.6</code> and <code>1.18.0</code>. Lastly, tags like <code>alpine</code> and <code>perl</code> indicate NGINX Alpine OS Builds and with NGINX Perl support, respectively. The strategy is more suited to public exposed images and adds little value for privately consumed images.</p><h1 id=usage-recommendation>Usage Recommendation</h1><p>Teams should use a container image tagging approach that’s both consistent and forward-looking to increase the image’s maintainability over time. The following guidelines ensures consistency and the ability to trace changes.</p><ul><li>Using the predictable <strong>SemVer</strong> style is a good idea. The approach tightly couples the image to the underly service and can be managed using automation. Moreover, any downnstream users are also assured of receiving a tag which is compatible with their existing systems.</li><li>Do not use <strong>rolling tags</strong> when you deploy containers in production. This makes it harder to track deployed images and to roll them back effectively.</li><li>Use <strong>stable tags</strong> for picking base images.</li></ul><p>Additionally, you can enable tag immutability in your image registry like <a href=container-registry.com><strong>Harbor</strong></a>. This would make sure that only unique tags are pushed to the repository. The immutability of tags ensures that images cannot be deleted or altered in any way, such as by re-pushes, re-taggings, or by replication from another registry. This is an age old practice that organisations have been doing with Java and NPM registries like JFrog and Sonatype.</p><p>Find out how <a href=container-registry.com><strong>Harbor</strong></a> can streamline container releases by <a href=https://container-registry.com/>trying it for free</a>.</p></div><div class="pt-1 pb-4"><p><strong>Published</strong> — September 9, 2021</p></div><div class=post-author><div class=post-author-avatar><img src=https://container-registry.com//team/rahul-sharma.png alt></div><div class=post-author-info><a class=post-author-name href=https://container-registry.com/authors/rahul-sharma/>Rahul Sharma</a>
<span class=post-author-date>Sep 9, 2021</span></div></div><div class=post-tags><strong>Tags:</strong>
<a class=post-tag href=/tags/container-images>Container Images</a>
<a class=post-tag href=/tags/image-tags>Image tags</a>
<a class=post-tag href=/tags/best-practices>Best practices</a></div><div class=post-categories><strong>Categories:</strong>
<a class=post-category href=/categories/best-practices>Best practices</a></div></div></div></div></div></div></div><div class=footer><div class=container><div class=row><div class=col-12><h3 class=footer-title>Container Registry</h3></div></div></div></div><div class=footer-second><div class=container><div class=row><div class=col-12><div class=footer-second-menu><div class=row><div class="col-12 col-md-3"><h3>Site</h3><div class=menu-footer-primary><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-features><a href=/#features><span>Features</span></a></li><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Services</h3><div class=menu-footer-secondary><ul><li class="menu-item-customer portal"><a id=customer-portal href=javascript:void(0) data-billsby-type=account>Customer Portal</a></li><li class="menu-item-c8n free regsitry"><a href=https://c8n.io><span>C8N Free Regsitry</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Support</h3><div class=menu-footer-secondary><ul><li class="menu-item-knowledge base"><a href=/docs/><span>Knowledge Base</span></a></li><li class="menu-item-privacy policy"><a href=/privacy/><span>Privacy Policy</span></a></li><li class="menu-item-terms of service"><a href=/terms-of-service/><span>Terms of Service</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Social</h3><div class=menu-footer-social><ul class=d-flex><li class="menu-item-social mr-1"><a href=https://twitter.com/ContainerRgstry target=_blank><i class="fab fa-twitter"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.reddit.com/r/docker/ target=_blank><i class="fab fa-reddit-alien"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.linkedin.com/showcase/container-registry target=_blank><i class="fab fa-linkedin"></i></a></li><li class="menu-item-social mr-1"><a href=/contact/ target=_blank><i class="far fa-envelope"></i></a></li></ul></div></div></div></div></div></div></div></div><div class=footer-third><div class=container><div class=row><div class=col-12><div class=text-white>©Copyright - Container Registry by 8gears Ltd</div></div></div></div></div><script type=text/javascript src=/js/bundle.min.9a1dd4e304e31692e99e345ec7616a89672d96b704f87f69ba1d8ba3d392a6f6.js></script><script>const queryString=window.location.search,urlParams=new URLSearchParams(queryString),custom_domain=urlParams.get('cd');for(const a of document.getElementsByName("cd_url"))a.textContent=custom_domain!=void 0?custom_domain:"c8n.io"</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-179953813-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-179953813-1',{link_attribution:!0})</script><script type=text/javascript id=hs-script-loader async src=//js.hs-scripts.com/7006577.js></script></body></html>