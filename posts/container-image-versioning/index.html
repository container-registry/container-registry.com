<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Container Image Versioning - Container Registry</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><meta name=title property="og:title" content="Container Image Versioning"><meta name=tags content="Best Practice,Image Versioning ,Image Tags,Best practices,Semantic Versioning,Versioning Strategy"><meta name=twitter:title content="Container Image Versioning"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ContainerRgstry"><meta name=twitter:creator content="@vad1mo"><meta name=twitter:image property="og:image" content="https://container-registry.com/posts/posts/container-image-versioning/sm-container-image-versioning.jpg"><link rel=icon href=https://container-registry.com/favicon.png><link rel=apple-touch-icon sizes=180x180 href=https://container-registry.com//favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://container-registry.com//favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://container-registry.com//favicon/favicon-16x16.png><link rel=manifest href=https://container-registry.com//favicon/site.webmanifest><link rel=mask-icon href=https://container-registry.com//favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=https://container-registry.com//favicon/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="https://container-registry.com//favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;500&family=Open+Sans&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.min.fdc3cc3c5651044d7ff358a0626f6effac444e4c0f7d5aad44dba718ad4fe89e.css><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-P2NXZV4")</script><script src=https://js.sentry-cdn.com/b9481453656a4f9daa3270f89fa3b817.min.js crossorigin=anonymous></script><script defer src=https://unpkg.com/alpinejs@3.10.2/dist/cdn.min.js></script><script defer src=https://js.chargebee.com/v2/chargebee.js data-cb-site=container-registry></script></head><body class='page page-posts-single'><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2NXZV4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class="menu-item-knowledge base"><a href=/docs/><span>Knowledge Base</span></a></li><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-blog><a href=/posts/><span>Blog</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-career><a href="https://container-registry.notion.site/Open-Positions-c118efd6a984438b8def1bb8ae9c2419?pvs=25"><span>Career</span></a></li></ul></div><div id=header class='header header-fixed'><div class=container><div class=logos><div class=logo><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo-white.svg></a></div><div class=logo-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo-white.svg></a></div></div><div class=main-menu><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a><li class="menu-item-knowledge base"><a href=/docs/><span>Knowledge Base</span></a><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a><li class=menu-item-about><a href=/about/><span>About</span></a><li class=menu-item-blog><a href=/posts/><span>Blog</span></a><li class=menu-item-contact><a href=/contact/><span>Contact</span></a><li class=menu-item-career><a href="https://container-registry.notion.site/Open-Positions-c118efd6a984438b8def1bb8ae9c2419?pvs=25"><span>Career</span></a></ul></div><div id=toggle-main-menu-mobile class=menu-trigger><button class=hamburger>Menu</button></div></div></div><div id=wrapper class=wrapper><div class="hero hero-set-height" style=height:500px><div class=hero-image style="background-image:url(/posts/container-image-versioning/bernd-dittrich-0_vaG4ktYTc-unsplash.jpg),linear-gradient( to right,#00374D,#d03808 );background-blend-mode:overlay"><div class=container><div class=hero-text><h1 class=mb-1 style=color:#fff>Container Image Versioning</h1><p style=color:#fff>Your Best Versioning Strategy for Secure Deployments</p></div></div></div></div><div class="strip strip-white"><div class="container pt-4 pt-md-10 pb-4 pb-md-10"><div class="row justify-content-start"><div class="col-12 col-md-10 col-lg-8 col-xl-7"><div class="post post-single"><div class="content pb-5"><p>Containers have simplified how we develop and deploy software. The way in which container images are managed is a critical component of a smooth CI/CD process. Container Registries act as trusted intermediaries between development and runtime environments for containerized applications.</p><p>Organizations that build and deploy container-native applications need to choose between various tools to build, run and manage containers in production and image versioning is a key decisions that engineers need to master in order to support that process. The central purpose of a container registry is to serves as the central repository for deploying, versioning, and managing container-native artifacts. By utilizing the built-in functions of the container registry, release engineers can easily manage deployments to multiple environments.</p><h2 id=what-is-versioning>What is Versioning?</h2><p>As in most development processes, versioning container images in a repository is necessary to denote changes made over a product&rsquo;s lifecycle. Using a combination of timestamps, commit IDs, and pre-defined strings, a clear picture of what is deployed in what environment can be seen. Versioning allows engineers to trace changes made in that particular software or image back to changes in source code.</p><h3 id=how-container-image-versioning-differs-from-software-versioning>How Container Image Versioning Differs from Software Versioning</h3><p>The concept of versioning or tagging as it is named in the container space, differs from the concepts we usually understand when referring to versioning in traditional software.</p><p>The main difference is that tags are not stable and can point to some other image layers over the course of time. Also, multiple tags can all point to the same set of layers.</p><p>We can observe this concept applied on almost all popular open source container images on Docker Hub. Below is the screenshot of the <a href=https://hub.docker.com/_/nginx>Nginx</a> tag descriptions on Docker Hub.</p><p><img src=../nginx.png alt></p><p>Each row in the list refers to a distinct image of Nginx probably containing a different extension or application version. The first row for example has the tags <code>1.19.6</code>, <code>mainline</code>, <code>1</code>, <code>1.19</code> and <code>:latest</code>. All the tags point to the same image layers for now</p><p>Applying multiple tags on the same image is an established convention for image consumers to provide context regarding the image tag stability. Some tags will change frequently some seldom and some never changed.</p><p><img src=../rolling_tags_diagram.png alt></p><p>A common practice is to tag every release with <code>:latest</code> independent if it is a development snapshot or the final release. Every successful run of the CI/CD pipeline will be tagged with <code>:latest</code> and consequently point to different image layers. Although very handy for development this is not desired for the productive rollout. To provide image consumers with more control over the image change frequency and the impact of a change, the tag name carries a context. For example the meaning of <code>1.19</code> indicated that this tag will always point to the latest patch release <code>1.19.6</code>,<code>1.19.7</code>,<code>1.19.8</code> and so on.</p><h3 id=importance-of-container-versioning>Importance of Container Versioning</h3><p>As touched on previously, including the proper version for a release is critical to ensure DevOps and other members of the team have a method to determine what changed from the prior release. Because of this fact, it is recommended to be explicit when using images based off publicly available containers. The same is true for images that may reference other containers in order to run properly.</p><p>If an engineer depends on an image with the <code>:latest</code> tag for their upstream image, they run the risk of introducing an unwanted side effect in their container because the <code>:latest</code> tag will point to different image layers somewhere in the future unnoticed by our engineer as his declaration in Dockerfile will still stay the same. By explicitly stating a version, an engineer can make sure that he always receive the desired layers.</p><p>These explicit versions should also be formatted and integrated in a way that points back to changes in the release. If a feature released to production started as a project management task, this version should line up with the intended release cycle that was part of that project. By doing so, an engineer can easily see what could be considered &ldquo;breaking changes.&rdquo;</p><p>Another aspect of proper versioning and usage of container images is the ability to roll back to a previous state in a very short amount of time. In some cases, multiple versions of the same product may be required to be active. For example, a company may need to allow backwards compatibility for web services they offer to clients. Orchestrating multiple versions of the image is what makes this type of scenario possible.</p><h2 id=image-tagging-strategy>Image Tagging Strategy</h2><p>Part of an engineering team&rsquo;s adoption of container technology is to determine what type of strategy they will use for image tagging. By determining this strategy up-front, integration with CI/CD pipelines can be made easier thanks to the ability to follow a standard. Using this strategy, developers and the operations team have a usable method for identifying artifacts.</p><h3 id=list-of-available-strategies>List of Available Strategies</h3><ul><li><a href=#image-id-digest>Image ID (digest)</a>;</li><li><a href=#image-tag>Image tags</a>:<ul><li><a href=#rolling-image-tags>Rolling tags</a>;</li><li><a href=#using-semantic-versioning-for-tags>SemVer tags</a>;</li><li><a href=#using-gitcommit>GitCommit</a>;</li><li><a href=#timestamp>Timestamp</a>;</li><li><a href=#build-id>Build ID</a>.</li></ul></li></ul><h3 id=image-id-digest>Image ID: Digest</h3><p>Every image has a unique ID, also known as a digest. It is a hash of its manifest that is generated using the SHA265 algorithm.</p><div class="note info"><div class=icon><img src=/images/icons/ico-info.svg alt></div><div class=note-content><h3 class=title>INFO</h3><p>Remember that images and layers are not synonyms. One image may have multiple layers. Each of them would have its own digest, and the parent image – to be precise, its manifest list – will have its own digest, too.</p></div></div><p>Any modifications of the image will result in a new digest.</p><p>In addition to the image <em>identification</em>, the digest also serves the purpose of image <em>verification</em>. You can recalculate the digest using image data and verify that the contents have not been modified.</p><p>Digests are the safest way to identify images. Using digests, you can be sure what you are deploying. They are <strong>immutable</strong>.</p><p>Indeed, the only problem with them is that they are barely readable. You cannot expect someone to memorize an image ID.</p><h3 id=image-tag>Image Tag</h3><p>Image tags are named references to an image version at a specific point in time. Tags allow an easy lookup of image revisions by using human-readable strings.</p><p>Additionally, tags can be used to store helpful information about a specific image version. Most often, the image tag consists of an indication of the underlying service artifacts, supported architectures, and applicable environments.</p><p>Unfortunately, <strong>any tags are mutable</strong>, so that the image represented by the tag might change over time. Tags can not get you back to a build, and the contents of the build. So, it’s hard to tell exactly what you’ll get when you pull an image by its tag.</p><p>Consequently, using tags as your versioning strategy alone won&rsquo;t allow you to roll back to a previous version should the current one not be working.</p><h3 id=rolling-image-tags>Rolling Image Tags</h3><p>We must mention two widely used universal Docker image tags. They are assigned to images on a rolling basis: with every new release, the tag rolls from the previous version to the newest.</p><p>These tags comes in handy if you need to grab the most relevant image but do not know which one you need. You can also use rolling tags to setup your orchestration tool to pull images with these tags to ensure that you get all updates in time.</p><p>The drawback of this approach is that you may get an incompatible image one day. Although this is fine for the testing environment, it is not acceptable for production. Here you&rsquo;d better rely on unique tags that will be described later.</p><p>One of the rolling tags is <code>:latest</code>.</p><div class="note warning"><div class=icon><img src=/images/icons/ico-warning.svg alt></div><div class=note-content><h3 class=title>WARNING</h3><p>Never deploy any images with the <code>:latest</code> tag. Apart from the fact that tags are not mutable, this one is generated when you do not specify any other tag.</p></div></div><p>Other popular canonical name that developers use as a tag is <code>:stable</code>. The tag was supposed to demonstrate that the contents of an image are stable and safe to be deployed to production environments and be consumed by downstream containers in orchestrated environments.</p><p>As in the case of <code>:latest</code>, the pitfall here is the impossibility to roll back to a prior version. Since all releases are marked as “stable,” those that are replaced with the newest version are in a semi-archival state. While still usable, the non-uniqueness of that tag can spoil image orchestration.</p><h3 id=preliminary-conclusion-a-need-for-unique-tags>Preliminary Conclusion: A Need for Unique Tags</h3><p>We have identified two difficulties associated with using &ldquo;native&rdquo; Docker image attributes as your image versioning strategy:</p><ul><li><strong>Image IDs</strong> (digests) are not human-readable;</li><li><strong>Image tags</strong> are mutable.</li></ul><p>Image tags are easy to reference but are challenging to operate. The mutability of tags creates the risk of deploying wrong containers into production which can cause a myriad of issues, such as releasing untested features, broken APIs, bypassing security checks, production failures, etc. Thus, developer teams need an effective strategy that can work for any specific use cases.</p><h3 id=using-semantic-versioning-for-tags>Using Semantic Versioning for Tags</h3><p>Instead of tagging your images chaotically with some catchy names, you can stick to the old good system called <a href=https://semver.org/>Semantic Versioning</a>, also known as SemVer. In fact, this can be treated as a special case of the stable tag strategy mentioned before.</p><p>According to this, your tag would be the version number of your software that consists of three parts:</p><ul><li>incompatible changes;</li><li>compatible changes;</li><li>patches.</li></ul><p>For instance, <code>2.3.4.</code>. In this manner, you overcome the tag mutability since you are not going to tag images of another patch with the number from a different patch.</p><div class="note info"><div class=icon><img src=/images/icons/ico-info.svg alt></div><div class=note-content><h3 class=title>INFO</h3><p>Nonetheless, it does not make the tags immutable. Someone pushes a different image with the same tag, and – voilà! – the same confusion is there again.</p></div></div><h3 id=using-gitcommit>Using GitCommit</h3><p>Every time you do a commit, a new Docker image is generated. Therefore, teams can tag images using the short Git hash to trace back changes in a reliable manner.</p><p>Although Git hashes are way shorter than the image digests, they are still difficult to memorize and are not self-explanatory.</p><h3 id=use-other-unique-identifiers>Use Other Unique Identifiers</h3><p>Unique identifiers allow users to tag each image with semi-immutable references.</p><p>Identifiers like this are generated automatically and, if you use the same system to generate them, are produced only once.</p><div class="note info"><div class=icon><img src=/images/icons/ico-info.svg alt></div><div class=note-content><h3 class=title>INFO</h3><p>This method still does not exclude the possibility of someone tempting with your images. Although the identifiers are unique and immutable within their native systems, the image tags are not.</p></div></div><p>There are several ways to generate unique tags for an image. We give you the two most popular methods.</p><h4 id=timestamp>TIMESTAMP</h4><p>A <strong>timestamp</strong> is, indeed, an easy solution. But it has more drawbacks than advantages. It lacks a correlation to the included changeset(s) for the container image release since you cannot match it with the respective build.</p><p>Do not forget about the evil timezone: which time was it actually in yours? Moreover, what if you created more than one image at exactly the same time? Last but not least, someone can push an image with the same tag just by adding it manually.</p><h4 id=build-id>BUILD ID</h4><p>A build <strong>ID</strong> is a unique identification of binaries. It is not only truly authentic but directly refers to a certain build. It also cannot be faked. But, similarly to the image digest, it is long and does not give any hint about the changesets it includes. Neither it is helpful if you want to search for specific image.</p><h3 id=best-use-case-for-each-strategy>Best Use Case for Each Strategy</h3><ul><li><p>Use <strong>rolling tags</strong> for picking base images and pulling updates constantly.</p></li><li><p>Use <strong>unique tags</strong> when you deploy containers in production.</p></li><li><p>A predictable <strong>SemVer</strong> style is always a good idea. The approach tightly couples an image to the underlying changesets and can be managed using automation. Moreover, any downstream users are also assured of receiving an image that is compatible with their existing systems.</p></li><li><p>Rolling and SemVer tags, as in the example of <a href=#how-container-image-versioning-differs-from-software-versioning>NGINX above</a>, when used in combination provide a solid tagging strategy for every use case.</p></li><li><p>In small teams but sensitive deployments and for workflows of a manually manageable size, feel free to use digests, GitCommits, timestamps, and build IDs.</p></li></ul><h2 id=our-recommendation-tag-immutability-with-harbor>Our Recommendation: Tag Immutability with Harbor</h2><p>Additionally, you can enable tag immutability in your container image registry, such as <a href=https://goharbor.io>Harbor</a>. This will ensure that only unique tags are pushed to the repository and that the images cannot be deleted or altered in any way, such as by re-pushing, re-tagging, or replicating them from a different registry.</p><p>You can even use <a href=http://www.regexguru.com>regular expressions</a> to create tag immutability rules as described <a href=https://goharbor.io/docs/2.3.0/working-with-projects/working-with-images/create-tag-immutability-rules/>here</a>. Regex allows you to catch patterns of tags created following the semantic versioning rules: three parts separated by two commas. As a result, you make your SemVer tags immutable.</p><h3 id=managed-container-registry-service>Managed Container Registry Service</h3><p>For particularly busy container enthusiasts, we offer a managed container registry service, which we call simply Container Registry.</p><p>It is hosted in a cloud, offers all must-have features plus an SSO, RBAC, vulnerability scanners, etc., and has a storage-based pricing model.</p><p>Find out how <strong>our</strong> <strong>Harbor-inspired Container Registry</strong> can streamline container releases by <a href=https://container-registry.com/>trying it for free</a>.</p></div><div class="pt-1 pb-4"><p><strong>Published</strong> — September 9, 2021</p><div class=post-lastupdate>Last Updated —
<span class=post-date-date>September 20, 2023</span></div></div><div class=post-author><div class=post-author-avatar><img src=https://container-registry.com/team/rahul-sharma.png alt></div><div class=post-author-info><a class=post-author-name href=https://container-registry.com/authors/rahul-sharma/>Rahul Sharma</a></div></div><div class="list-taxonomy post-categories"><strong>Categories:</strong>
<a href=https://container-registry.com/blog/categories/best-practice/ class="post-taxonomy post-category">Best Practice</a></div><div class="list-taxonomy post-tags"><strong>Tags:</strong>
<a href=https://container-registry.com/blog/tags/image-versioning/ class="post-taxonomy post-tag">Image Versioning </a><a href=https://container-registry.com/blog/tags/image-tags/ class="post-taxonomy post-tag">Image Tags</a>
<a href=https://container-registry.com/blog/tags/best-practices/ class="post-taxonomy post-tag">Best Practices</a>
<a href=https://container-registry.com/blog/tags/semantic-versioning/ class="post-taxonomy post-tag">Semantic Versioning</a>
<a href=https://container-registry.com/blog/tags/versioning-strategy/ class="post-taxonomy post-tag">Versioning Strategy</a></div></div></div></div></div></div></div><div class=footer><div class=container><div class=row><div class=col-12><h3 class=footer-title>Container Registry</h3></div></div></div></div><div class=footer-second><div class=container><div class=row><div class=col-12><div class=footer-second-menu><div class=row><div class="col-12 col-md-3"><h3>Site</h3><div class=menu-footer-primary><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-features><a href=/#features><span>Features</span></a></li><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-career><a href="https://container-registry.notion.site/Open-Positions-c118efd6a984438b8def1bb8ae9c2419?pvs=25"><span>Career</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Services</h3><div class=menu-footer-secondary><ul><li class=menu-item-customer-portal><a href=javascript:void(0) data-cb-type=portal>Customer Portal</a></li><li class=menu-item-free-container-registry-c8n><a href=https://c8n.io><span>Free Container Registry C8N</span></a></li><li class=menu-item-container-registry-on-exoscale><a href=/exoscale/><span>Container Registry on Exoscale</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Support</h3><div class=menu-footer-secondary><ul><li class=menu-item-knowledge-base><a href=/docs/><span>Knowledge Base</span></a></li><li class=menu-item-live-tech-support><a href=/contact/support/><span>Live Tech Support</span></a></li><li class=menu-item-privacy-policy><a href=/privacy/><span>Privacy Policy</span></a></li><li class=menu-item-service-status><a href=https://statuspage.container-registry.com><span>Service Status</span></a></li><li class=menu-item-terms-of-service><a href=/terms-of-service/><span>Terms of Service</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Social</h3><div class=menu-footer-social><ul class=d-flex><li class="menu-item-social mr-1"><a href=https://twitter.com/ContainerRgstry target=_blank><i class="fab fa-twitter"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.reddit.com/r/docker/ target=_blank><i class="fab fa-reddit-alien"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.linkedin.com/showcase/container-registry target=_blank><i class="fab fa-linkedin"></i></a></li><li class="menu-item-social mr-1"><a href=/contact/ target=_blank><i class="far fa-envelope"></i></a></li></ul></div></div></div></div></div></div></div></div><div class=footer-third><div class=container><div class=row><div class=col-12><div class=text-white>©Copyright - Container Registry by 8gears Ltd</div></div></div></div></div><script type=text/javascript src=/js/bundle.min.abbb6bc29d048694fce685e14c036aacfdefc0cf5b41680d75e1079a109adce8.js></script><script>const queryString=window.location.search,urlParams=new URLSearchParams(queryString),custom_domain=urlParams.get("cd");for(const e of document.getElementsByName("cd_url"))e.textContent=custom_domain??"c8n.io"</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RR0BRGBP89"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RR0BRGBP89",{link_attribution:!0})</script><script type=text/javascript id=hs-script-loader async src=//js.hs-scripts.com/7006577.js></script></body></html>