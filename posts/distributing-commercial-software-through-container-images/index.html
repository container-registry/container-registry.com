<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Distributing Commercial Software Through Container Images - Container Registry</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=title property="og:title" content="Distributing Commercial Software Through Container Images"><meta name=tags content="Software-Vendors,ISV,Commercial Container Image Distribution,Sell Container Images,Commercial Container Image Distribution,Stripe"><meta name=twitter:title content="How can ISVs Distribute Commercial Software Through Container Images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ContainerRgstry"><meta name=twitter:creator content="@vad1mo"><meta name=twitter:image property="og:image" content="https://container-registry.com/posts/distributing-commercial-software-through-container-images/SM-Container-Harbor-Loading-Container-For-Shipping.jpg"><link rel=icon href=https://container-registry.com/favicon.png><link rel=apple-touch-icon sizes=180x180 href=https://container-registry.com//favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://container-registry.com//favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://container-registry.com//favicon/favicon-16x16.png><link rel=manifest href=https://container-registry.com//favicon/site.webmanifest><link rel=mask-icon href=https://container-registry.com//favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=https://container-registry.com//favicon/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="https://container-registry.com//favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;500&family=Open+Sans&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.min.fdc3cc3c5651044d7ff358a0626f6effac444e4c0f7d5aad44dba718ad4fe89e.css><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-P2NXZV4")</script><script src=https://js.sentry-cdn.com/b9481453656a4f9daa3270f89fa3b817.min.js crossorigin=anonymous></script><script defer src=https://unpkg.com/alpinejs@3.10.2/dist/cdn.min.js></script><script defer src=https://js.chargebee.com/v2/chargebee.js data-cb-site=container-registry></script></head><body class='page page-posts-single'><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2NXZV4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class="menu-item-knowledge base"><a href=/docs/><span>Knowledge Base</span></a></li><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-blog><a href=/posts/><span>Blog</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://8gears.notion.site/Open-Positions-c118efd6a984438b8def1bb8ae9c2419><span>Jobs</span></a></li></ul></div><div id=header class='header header-fixed'><div class=container><div class=logos><div class=logo><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo-white.svg></a></div><div class=logo-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo-white.svg></a></div></div><div class=main-menu><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a><li class="menu-item-knowledge base"><a href=/docs/><span>Knowledge Base</span></a><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a><li class=menu-item-about><a href=/about/><span>About</span></a><li class=menu-item-blog><a href=/posts/><span>Blog</span></a><li class=menu-item-contact><a href=/contact/><span>Contact</span></a><li class=menu-item-jobs><a href=https://8gears.notion.site/Open-Positions-c118efd6a984438b8def1bb8ae9c2419><span>Jobs</span></a></ul></div><div id=toggle-main-menu-mobile class=menu-trigger><button class=hamburger>Menu</button></div></div></div><div id=wrapper class=wrapper><div class="hero hero-set-height" style=height:500px><div class=hero-image style="background-image:url(/posts/distributing-commercial-software-through-container-images/Container-Harbor-Loading-Container-For-Shipping.jpg),linear-gradient( to right,#00374D,#d03808 );background-blend-mode:overlay"><div class=container><div class=hero-text><h1 class=mb-1 style=color:#fff>Distributing Commercial Software Through Container Images</h1><p style=color:#fff>Level-up your software distribution program</p></div></div></div></div><div class="strip strip-white"><div class="container pt-4 pt-md-10 pb-4 pb-md-10"><div class="row justify-content-start"><div class="col-12 col-md-10 col-lg-8 col-xl-7"><div class="post post-single"><div class="content pb-5"><p>When delivering software to clients, many independent software vendors (ISVs) still rely on methods involving traditional software packaging methods such as downloadable binaries, ZIPs, or other type of compressed delivery. These distribution approaches are often OS specific. As a result, developers are forced to spend precious time on tailoring software delivery rather than innovation. Containerization is already simplifying software delivery for many of today&rsquo;s mainstream products. Choosing the right <a href=https://container-registry.com>container registry that meets ISVs requirements</a> is crucial to satisfy vendors and meet client expectations.</p><p>ISVs should take advantage of advances in this area to focus on packaging their product as container images. It must provide automation, easy customer access, and self-service options. In this article, we will explore a solution allowing software vendors to distribute their product as container images and link the container registry with a payment system.</p><h2 id=uses-for-containerized-software>Uses for Containerized Software</h2><p>An ISV builds and distributes branded software meant to run on multiple client systems. It follows the tenet that software packaging and delivery is a core part of an ISV’s operations. As revolutionary as the vendor’s new software might be, the client will have a hard time adopting the software if it is a pain to install and operate.</p><p>A promising method for efficiently packaging software for distribution is containerization. It provides a way to package software, its dependencies, and configuration files into a single, distributable container image. A piece of software may be targeted for a specific operating system. However, containerized software packages do not require a copy of an OS to be included in the image. Instead, containers utilize the host machine to securely isolate one or more instances of the software. Furthermore, they allow for cross-platform compatibility so that the program may run on a variety of operating systems.</p><p>You can think of a container image as an ISV&rsquo;s product wrapped in a ready-to-go package. One containing everything a client needs to run the software when combined with their preexisting infrastructure.</p><p>Because vendors distribute software intended for client-specific environments, containerization allows them to develop a universal package instead of catering to a specific OS. Experience dictates that most clients are happy to receive a package that is not machine-dependent. Although, there are instances when they may require the ability to use the software using both traditional and newer methods.</p><h2 id=benefits-of-container-images>Benefits of Container Images</h2><p>There are key benefits to distributing software as a container image or even as multiple container images. First of all, the method facilitates the software’s management and deployment with existing infrastructure like Docker or <a href=https://kubernetes.io/>Kubernetes</a>.</p><p>Second, distributed container images have an out-of-the-box update mechanism using <code>docker pull</code>. This command lets you easily download the image that you require. The pull command will also update the image if a new version is available.</p><p>Third, because container images follow standards in how they are constructed, many tedious tasks can be automated. Tools like <a href=https://coreos.com/clair/docs/latest/>Clair</a> allow you to parse through the contents of a container image, exposing any known security vulnerabilities via dependency scanning.</p><p>Lastly, delivering software as a container provides an optimally consistent operating environment for the software. As long as the required configuration and environment variables are in place, you can be rest assured the image will perform for the client without regard for machine specifics.</p><h2 id=challenges-with-distributing-container-images>Challenges With Distributing Container Images</h2><p>Traditional digital software distribution is performed not only with different packaging formats, but different transmission channels as well. The most common of which are http, ftp, or an email attachment. In the containerization world, images are distributed primarily over container registries. These registries are directly accessed from the customer&rsquo;s container hosting environment at runtime. The workflow is highly standardized, fully automated, and require the ISV to provide a container registry for clients to access.</p><p>One major challenge that emerges when distributing a container image stems from customer access to your <a href=https://container-registry.com/>private container registry</a>. You want clients to download the software they pay for, but do not want to give them access to images that they are not entitled to. How do you provide the best developer/customer experience while only giving customers the level of access that they require? Additionally, how do you integrate a CRM, ERP, or payment system with a container registry in a way that automates the provisioning of customer access to the software at sale completion?</p><h2 id=requirements-for-an-isv-friendly-container-registry>Requirements for an ISV Friendly Container Registry</h2><p>Based on client expectations and typical ISVs workflows, one can infer key requirements for container registries for ISVs. When choosing a container registry, it is important to clarify some aspects. For instance, what integrations do you require? What tasks will need automation? How would a container registry fit into your current distribution channel?</p><p>A container registry should:</p><ul><li>Grant customers access to a set of images that they paid for.</li><li>Use role-based access and control to container images.</li><li>Utilize an access window to regulate the length of time the image is available.</li><li>Programmatically manage the container registry to create user accounts or generate access tokens based on subscription or payment status.</li><li>Interface with a subscription/payment management system, CRM, ERP, or online shopping cart.</li></ul><p>In addition to the above, there are other aspects that may be considered useful such as a custom domain, easy Web UI, and auditing capabilities.</p><h2 id=docker-hub-alternatives>Docker Hub Alternatives</h2><p>Docker Hub has made huge strides in container technology, but that does not mean it is automatically the defacto choice in the realm of software distribution. While Docker Hub offers <a href=https://www.docker.com/pricing>special programs for ISVs</a>, it lacks fine-grain access control that vendors often seek. Other drawbacks of Docker Hub include a functionally limited REST API and a short list of accepted payment methods. More importantly, Docker Hub charges a fee of two-digit percentage points on all software sold through their marketplace. A strong factor for any ISV when choosing a solution.</p><p>While there are some <a href="https://hub.docker.com/search?q=&amp;type=image&amp;image_filter=store">software vendors</a> using Docker Hub, <a href=https://container-registry.com/>Container Registry’s ISV programs</a> offer a combination of features that give enterprise users a leading edge in software distribution. For example, based on <a href=https://goharbor.io/>Harbor</a>, Container Registery offers all the pros of Docker Hub with advanced security and identity-management features built-in. This allows clients to consume images without restriction for only the products they have purchased.</p><h2 id=distributing-with-harbor-container-registry>Distributing With Harbor Container Registry</h2><p>As a solution, it is recommended you manage client access to projects using a setup like Harbor’s <a href=https://goharbor.io/docs/2.1.0/administration/managing-users/>Guest or Limited Guest accounts</a> or <a href=https://goharbor.io/docs/2.1.0/working-with-projects/project-configuration/create-robot-accounts/>Robot accounts</a>. Using one of these methods, you can manage privileges and extend access to customers based on their subscription.</p><p>There are two ways to distribute images with Container Registry. The first involves distribution from an account that the client creates, or one you create for them using the API. However, if the registry is using an identity provider like <a href=https://openldap.org/>LDAP</a> or <a href=https://openid.net/connect/>OpenID Connect</a>, the client needs to have an account with such identity provider. In a corporate environment, this may not be possible since identities are usually handed out to employees only.</p><p>In the second scenario, a robot account associated with a particular client needs to be generated over the API. With this approach, the client will not have a UI login. Rather, they end up with only a permission to pull images. Aside from the type of account created, there is not much difference in the two workflows.</p><h3 id=synchronize-a-subscription-management-service-with-a-container-registry>Synchronize a Subscription Management Service with a Container Registry</h3><figure><img src=/posts/distributing-commercial-software-through-container-images/diagram-vending-container-images.svg alt="Vending Container Images with Harbor and Strip" width=100%></figure><p>Using this methodology, let us look at an example of how to synchronize a subscription management service with a container registry. The <a href=https://container-registry.com>Harbor container registry</a> provides a complete <a href=https://8gears.container-registry.com/devcenter-api-2.0>OpenAPI Specification</a> that makes managing users and projects seamless over a RESTful API.</p><p>A Python integration example is available to demonstrate Stripe Billing with <a href=https://github.com/stripe/stripe-python>Python SDK</a>. This will provide specifics on how to get started with the Container Registry as an ISV. Full documentation and source code can be found on <a href=https://github.com/container-registry/container-vending-machine>GitHub</a>.</p><p>Let us say your client signs up for an account. Your ISV script generates a repository and creates credentials for them based on a <a href="https://stripe.com/docs/api/subscriptions?lang=python">subscription webhook</a>. In this script, specific files are dedicated to responding to a client’s subscription. In the <a href=https://github.com/container-registry/container-vending-machine/blob/master/stripe_harbor_example/sync/views.py><code>views.py</code></a> file, we receive and process webhooks from Stripe. Information regarding the customer’s subscription status is returned and action is taken accordingly. This is done by creating functions that direct the program as to how to handle client actions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>handle_new_subscription</span>(subscription):
</span></span><span style=display:flex><span>  customer <span style=color:#f92672>=</span> Customer<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get_or_create(
</span></span><span style=display:flex><span>    stripe_id<span style=color:#f92672>=</span>subscription[<span style=color:#e6db74>&#39;customer&#39;</span>])
</span></span><span style=display:flex><span>  customer<span style=color:#f92672>.</span>ensure_email()
</span></span><span style=display:flex><span>  customer<span style=color:#f92672>.</span>create_harbor_user()
</span></span><span style=display:flex><span>  customer<span style=color:#f92672>.</span>save()
</span></span></code></pre></div><p>The webhook handler will call such functions by first taking the request body and determining what type of event the client has initiated:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>webhook_handler</span>(request):
</span></span><span style=display:flex><span>  payload <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>body
</span></span><span style=display:flex><span>  event <span style=color:#f92672>=</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    event <span style=color:#f92672>=</span> stripe<span style=color:#f92672>.</span>Event<span style=color:#f92672>.</span>construct_from(
</span></span><span style=display:flex><span>      json<span style=color:#f92672>.</span>loads(payload), stripe<span style=color:#f92672>.</span>api_key)
</span></span></code></pre></div><p>Upon determining the event type, the handler will then execute the appropriate action from a list of possible actions based on the webhook&rsquo;s payload. For example, for a new subscription, it calls the above defined function constructed for that specific case:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> event<span style=color:#f92672>.</span>type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;customer.subscription.created&#39;</span>:
</span></span><span style=display:flex><span>  new_subscription <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>data<span style=color:#f92672>.</span>object
</span></span><span style=display:flex><span>  handle_new_subscription(new_subscription)
</span></span></code></pre></div><p>In the <a href=https://github.com/container-registry/container-vending-machine/blob/master/stripe_harbor_example/sync/models.py><code>models.py</code></a> file located in the same directory, we will update the internal database and manage access for the container registry. If the customer is in good standing, they receive credentials; if they have overdue payments, their container registry credentials are disabled:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>provision_product_access</span>():
</span></span><span style=display:flex><span>  h<span style=color:#f92672>.</span>provision_harbor_permissions_for_customer(self)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>remove_product_access</span>():
</span></span><span style=display:flex><span>  h<span style=color:#f92672>.</span>remove_product_access_for_customer(self)
</span></span></code></pre></div><p>As you can see, designing webhooks to respond to customer actions is a very straightforward process but one that requires thorough planning. Fortunately, many subscription management solutions used for integrations provide documentation (e.g., <a href=https://stripe.com/docs/webhooks/build>Stripe’s endpoint guide</a>) to walk you through setting up your webhook notifications code.</p><h2 id=level-up-with-container-images>Level Up With Container Images</h2><p>In this article, we went over why ISVs should be distributing software as container images. We touched on the challenge of determining appropriate client access and offered a solution before presenting Container Registry as the service of choice. Lastly, we went over an example of using webhooks to sync subscription management software with your container registry. The full example of which can be found on <a href=https://github.com/container-registry/container-vending-machine>GitHub</a>.</p><p>This example is just one possible option on how ISVs can distribute software to clients. Let us know about your particular requirements and see if Harbor can be used for that.</p><p>If you are ready to level up your software distribution program, head over to <a href=https://container-registry.com/>Container Registry</a>.</p><div class="col-12 pt-5"><div class="team team-summary"><div class=team-image><img alt="Container Registry logo" class=img-fluid src=/img/logo.svg></div><div class=team-block><div class=team-meta><h3 class=team-name>Container Management Solution for ISVs</h3></div><div class=team-content><p>Level-up your software distribution program with our Harbor based Container Management Solution.</p></div><a id=hero-cta-button href=/#pricing-title class="button button-secondary mt-1 btn-md text-center" style=text-decoration:none>Discover our offer</a></div></div></div></div><div class="pt-1 pb-4"><p><strong>Published</strong> — February 7, 2021</p><div class=post-lastupdate>Last Updated —
<span class=post-date-date>February 13, 2023</span></div></div><div class=post-author><div class=post-author-avatar><img src=https://container-registry.com/authors/vadim_bauer.jpg alt></div><div class=post-author-info><a class=post-author-name href=https://container-registry.com/authors/vadim-bauer/>Vadim Bauer</a></div></div><div class="list-taxonomy post-categories"><strong>Categories:</strong>
<a href=https://container-registry.com/blog/categories/software-vendors/ class="post-taxonomy post-category">Software-Vendors</a>
<a href=https://container-registry.com/blog/categories/isv/ class="post-taxonomy post-category">ISV</a>
<a href=https://container-registry.com/blog/categories/commercial-container-image-distribution/ class="post-taxonomy post-category">Commercial Container Image Distribution</a></div><div class="list-taxonomy post-tags"><strong>Tags:</strong>
<a href=https://container-registry.com/blog/tags/sell-container-images/ class="post-taxonomy post-tag">Sell Container Images</a>
<a href=https://container-registry.com/blog/tags/commercial-container-image-distribution/ class="post-taxonomy post-tag">Commercial Container Image Distribution</a>
<a href=https://container-registry.com/blog/tags/stripe/ class="post-taxonomy post-tag">Stripe</a></div></div></div></div></div></div></div><div class=footer><div class=container><div class=row><div class=col-12><h3 class=footer-title>Container Registry</h3></div></div></div></div><div class=footer-second><div class=container><div class=row><div class=col-12><div class=footer-second-menu><div class=row><div class="col-12 col-md-3"><h3>Site</h3><div class=menu-footer-primary><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-features><a href=/#features><span>Features</span></a></li><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://8gears.notion.site/Open-Positions-c118efd6a984438b8def1bb8ae9c2419><span>Jobs</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Services</h3><div class=menu-footer-secondary><ul><li class=menu-item-customer-portal><a href=javascript:void(0) data-cb-type=portal>Customer Portal</a></li><li class=menu-item-free-container-registry-c8n><a href=https://c8n.io><span>Free Container Registry C8N</span></a></li><li class=menu-item-container-registry-on-exoscale><a href=/exoscale/><span>Container Registry on Exoscale</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Support</h3><div class=menu-footer-secondary><ul><li class=menu-item-knowledge-base><a href=/docs/><span>Knowledge Base</span></a></li><li class=menu-item-live-tech-support><a href=/contact/support/><span>Live Tech Support</span></a></li><li class=menu-item-privacy-policy><a href=/privacy/><span>Privacy Policy</span></a></li><li class=menu-item-service-status><a href=https://statuspage.container-registry.com><span>Service Status</span></a></li><li class=menu-item-terms-of-service><a href=/terms-of-service/><span>Terms of Service</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Social</h3><div class=menu-footer-social><ul class=d-flex><li class="menu-item-social mr-1"><a href=https://twitter.com/ContainerRgstry target=_blank><i class="fab fa-twitter"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.reddit.com/r/docker/ target=_blank><i class="fab fa-reddit-alien"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.linkedin.com/showcase/container-registry target=_blank><i class="fab fa-linkedin"></i></a></li><li class="menu-item-social mr-1"><a href=/contact/ target=_blank><i class="far fa-envelope"></i></a></li></ul></div></div></div></div></div></div></div></div><div class=footer-third><div class=container><div class=row><div class=col-12><div class=text-white>©Copyright - Container Registry by 8gears Ltd</div></div></div></div></div><script type=text/javascript src=/js/bundle.min.abbb6bc29d048694fce685e14c036aacfdefc0cf5b41680d75e1079a109adce8.js></script><script>const queryString=window.location.search,urlParams=new URLSearchParams(queryString),custom_domain=urlParams.get("cd");for(const e of document.getElementsByName("cd_url"))e.textContent=custom_domain??"c8n.io"</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RR0BRGBP89"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RR0BRGBP89",{link_attribution:!0})</script><script type=text/javascript id=hs-script-loader async src=//js.hs-scripts.com/7006577.js></script></body></html>