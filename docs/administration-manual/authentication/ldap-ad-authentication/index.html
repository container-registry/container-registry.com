<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>LDAP/AD Authentication - Container Registry</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://container-registry.com/favicon.png><link rel=apple-touch-icon sizes=180x180 href=https://container-registry.com//favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://container-registry.com//favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://container-registry.com//favicon/favicon-16x16.png><link rel=manifest href=https://container-registry.com//favicon/site.webmanifest><link rel=mask-icon href=https://container-registry.com//favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=https://container-registry.com//favicon/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="https://container-registry.com//favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;500&family=Open+Sans&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.min.d92fe0e74a2f9be931a2bac57163e28df7c31880c8886a75f93b06dc1caecbf7.css><script>(function(b,d,e,a,g){b[a]=b[a]||[],b[a].push({'gtm.start':(new Date).getTime(),event:'gtm.js'});var f=d.getElementsByTagName(e)[0],c=d.createElement(e),h=a!='dataLayer'?'&l='+a:'';c.async=!0,c.src='https://www.googletagmanager.com/gtm.js?id='+g+h,f.parentNode.insertBefore(c,f)})(window,document,'script','dataLayer','GTM-P2NXZV4')</script></head><body class="page page-docs-single"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2NXZV4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-documentation><a href=/docs/><span>Documentation</span></a></li><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-blog><a href=/posts/><span>Blog</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></li></ul></div><div id=header class="header header-fixed"><div class=container><div class=logos><div class=logo><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo-white.svg></a></div><div class=logo-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo-white.svg></a></div></div><div class="docs_search search_parent"><div class=docs_search--field id=searchbox></div><div class=docs_search--result id=hits></div></div><div class=main-menu><ul><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a><li class=menu-item-documentation><a href=/docs/><span>Documentation</span></a><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a><li class=menu-item-about><a href=/about/><span>About</span></a><li class=menu-item-blog><a href=/posts/><span>Blog</span></a><li class=menu-item-contact><a href=/contact/><span>Contact</span></a><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></ul></div><div id=toggle-main-menu-mobile class=menu-trigger><button class=hamburger>Menu</button></div></div></div><div id=wrapper class=wrapper><div class=docs_section><div class=container><div class="row align-items-start"><div class="col-md-3 docs_sidebar"><div class=docs_sidebar-list><div class="docs_sidebar-item sidebar_dropdown"><div class=docs_sidebar-head_item><a class=docs_sidebar-name href=https://container-registry.com/docs/getting-started-guide/>Getting Started Guide</a>
<button class=btn-drop></button></div><ul class="docs_dropdown docs_menu"><li><a href=https://container-registry.com/docs/getting-started-guide/prerequisites/>Prerequisites</a></li><li><a href=https://container-registry.com/docs/getting-started-guide/new-user-sign-up/>New User Sign Up</a></li><li><a href=https://container-registry.com/docs/getting-started-guide/push-and-pull-images/>Push and Pull Images</a></li><li><a href=https://container-registry.com/docs/getting-started-guide/other-useful-features/>Other Useful Features</a></li></ul></div><div class="docs_sidebar-item sidebar_dropdown"><div class=docs_sidebar-head_item><a class=docs_sidebar-name href=https://container-registry.com/docs/user-manual/>User Manual</a>
<button class=btn-drop></button></div><ul class="docs_dropdown docs_menu"><li><a href=https://container-registry.com/docs/user-manual/why-use-container-registry/>Why Use Container Registry</a></li><li><a href=https://container-registry.com/docs/user-manual/what-is-harbor/>What Is Harbor?</a></li><li><a href=https://container-registry.com/docs/user-manual/container-registry-user-interface-a-short-overview/>Container Registry User Interface: A Short Overview</a></li><li class=sidebar_dropdown><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/user-manual/projects/>Working With Projects</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/user-manual/projects/repositories/>Repositories</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/managing-project-users/>Managing Project Users</a></li><li class=sidebar_dropdown><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/user-manual/projects/configuration/>Project Configuration</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/user-manual/projects/configuration/robot-accounts/>Robot Accounts</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/configuration/webhooks/>Webhooks</a></li></ul></li></ul></li><li class=sidebar_dropdown><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/user-manual/images/>Working With Artifacts</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/user-manual/images/push-and-pull-images/>Push and Pull Images</a></li><li><a href=https://container-registry.com/docs/user-manual/images/artifact-page/>Artifact Page</a></li><li><a href=https://container-registry.com/docs/user-manual/images/working-with-tags/>Working With Tags</a></li><li class=sidebar_dropdown><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/user-manual/images/tags/>Tag Policies</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/user-manual/images/tags/tag-retention/>Tag Retention</a></li><li><a href=https://container-registry.com/docs/user-manual/images/tags/tag-immutability/>Tag Immutability</a></li></ul></li></ul></li><li><a href=https://container-registry.com/docs/user-manual/working-with-logs/>Working With Logs</a></li><li><a href=https://container-registry.com/docs/user-manual/dedicated-vs-individual-account/>Dedicated vs Individual Account</a></li><li><a href=https://container-registry.com/docs/user-manual/double-starred-patterns/>Double-Starred Patterns</a></li></ul></div><div class="docs_sidebar-item sidebar_dropdown open"><div class=docs_sidebar-head_item><a class="docs_sidebar-name active" href=https://container-registry.com/docs/administration-manual/>Administration Manual</a>
<button class=btn-drop></button></div><ul class="docs_dropdown docs_menu"><li><a href=https://container-registry.com/docs/administration-manual/registration-for-system-admins/>Registration for System Admins</a></li><li class="sidebar_dropdown open"><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/administration-manual/authentication/ class=active>Configure User Authentication</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/administration-manual/authentication/database-authentication/>Database Authentication</a></li><li><a href=https://container-registry.com/docs/administration-manual/authentication/uaa-authentication/>UAA Authentication</a></li><li><a href=https://container-registry.com/docs/administration-manual/authentication/ldap-ad-authentication/ class=active>LDAP/AD Authentication</a></li><li><a href=https://container-registry.com/docs/administration-manual/authentication/oidc-authentication/>OIDC Authentication</a></li></ul></li><li><a href=https://container-registry.com/docs/administration-manual/user-management/>User Management</a></li><li><a href=https://container-registry.com/docs/administration-manual/system-robot-accounts/>System Robot Accounts</a></li><li><a href=https://container-registry.com/docs/administration-manual/endpoints-for-replications-and-proxy-cache/>Endpoints For Replications and Proxy Cache</a></li><li class=sidebar_dropdown><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/administration-manual/replication/>Configure Artifacts Replication</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/administration-manual/replication/configure-replication-rules/>Configure Replication Rules</a></li></ul></li><li><a href=https://container-registry.com/docs/administration-manual/system-wide-labels/>System-Wide Labels</a></li><li><a href=https://container-registry.com/docs/administration-manual/project-quotas/>Project Quotas</a></li><li class=sidebar_dropdown><div class=docs_sidebar-head_item><a href=https://container-registry.com/docs/administration-manual/scanners/>Vulnerability Scanners</a>
<button class=btn-drop></button></div><ul class="docs_submenu docs_dropdown"><li><a href=https://container-registry.com/docs/administration-manual/scanners/manage-pre-installed-scanners/>Manage Pre-Installed Scanners</a></li><li><a href=https://container-registry.com/docs/administration-manual/scanners/add-new-scanners/>Add New Scanners</a></li><li><a href=https://container-registry.com/docs/administration-manual/scanners/scanning-artifacts/>Scanning Artifacts</a></li><li><a href=https://container-registry.com/docs/administration-manual/scanners/general-configurations/>General Configurations</a></li></ul></li><li><a href=https://container-registry.com/docs/administration-manual/terminal-deletion-of-images/>Terminal Deletion of Images</a></li><li><a href=https://container-registry.com/docs/administration-manual/other-system-settings/>Other System Settings</a></li><li><a href=https://container-registry.com/docs/administration-manual/proxy-cache-projects/>Proxy Cache Projects</a></li></ul></div><div class="docs_sidebar-item sidebar_dropdown"><div class=docs_sidebar-head_item><a class=docs_sidebar-name href=https://container-registry.com/docs/user-guide/>User Guides</a>
<button class=btn-drop></button></div><ul class="docs_dropdown docs_menu"><li><a href=https://container-registry.com/docs/user-guide/oidc-configuration-for-google-workspaces/>OIDC configuration for Google Workspaces</a></li></ul></div></div><script>const sidebarDrop=document.querySelectorAll('.btn-drop');sidebarDrop.forEach(a=>{a.addEventListener('click',a=>{a.currentTarget.closest('.sidebar_dropdown').classList.toggle('open')})})</script><button id=menu-docs class="button button-primary">Docs menu</button></div><div class="col-md-8 offset-md-1 docs_content content"><h1 id=ldapad-authentication>LDAP/AD Authentication</h1><p>Every company needs a directory where all user login data is kept. There are two popular technologies for configuring and managing such directories – Windows Active Directory (AD) and Lightweight Directory Access Protocol – that are Harbor-compatible. It means that you can use an LDAP/AD server to add new users to the Container Registry instance and manage existing accounts on the server.</p><p>Indeed, you need to set up and configure such a server before you can activate this kind of user authentication in Container Registry. How you do it, depends on your provider. You can look for instructions on the official website of the <a href=https://www.openldap.org/doc/admin25/quickstart.html>OpenLDAP project</a> or in the <a href=https://docs.microsoft.com/en-us/windows-server/identity/identity-and-access>Windows server official documentation</a>.</p><h2 id=limitations-of-ldapad-authentication>Limitations of LDAP/AD Authentication</h2><p>If you select this authentication mode, then, as a system admin, you will only be able to see a list of users in your Container Registry admin console but you won&rsquo;t be able to perform any actions with them in the GUI, neither create and delete users nor change and reset their passwords. That all must be done on the LDAP or AD server. For the users, the <em>self-registration</em> option is not available in this mode (and you cannot enable it as an admin).</p><h2 id=advantages-of-ldapad-authentication>Advantages of LDAP/AD Authentication</h2><ul><li>If you already have an LDAP/AD server, you can onboard Container Registry users quicker.</li><li>You can use the same LDAP/AD server to add and manage users of more than one Container Registry instance.</li><li>You can create user groups and assign multiple users to projects in one leap.</li></ul><h2 id=enable-ldapad-user-authentication>Enable LDAP/AD User Authentication</h2><h3 id=information-you-need-for-configuring-ldapad-authentication>Information You Need for Configuring LDAP/AD Authentication</h3><p>All entries in an LDAP directory are organized into a structure resembling roots of a tree or a reverted tree. There is a root node – the highest one in the structure – where a few brunches with more nodes originate; other nodes have own brunches, etc.</p><p>Each entry – a node – has a unique identifying path, called <em>a distinguished name or DN</em>.</p><p>Every time a user submits his credentials, a search is performed inside this structure to match the provided user credentials with an entry and authenticate the user. That&rsquo;s why you need to keep at hand the following information about your LDAP server to configure it in Container Registry.</p><ul><li><p><strong>LDAP Search DN</strong>. This node coincides with the user who has access to the LDAP server which is usually an admin. This parameter should be specified as <code>cn=admin, dc=your-subdomain.container-registry.com</code> where the attribute <code>cn</code> stands for &ldquo;common name&rdquo; and <code>dc</code> stands for &ldquo;domain component&rdquo;.</p></li><li><p><strong>LDAP Search Password</strong>. Consequently, here you need to enter the password of the user you specified in the previous parameter.</p></li><li><p><strong>LDAP Base DN</strong>. Theoretically, you may use your LDAP server not only for managing Container Registry but also for other applications. In this case, the tree would have nodes/entries that are irrelevant to Container Registry users. Thus, you need to specify a node where the search for the relevant entries should start. This is your subdomain or custom domain in our service. This parameter needs to be specified as <code>dc=your-subdomain.container-registry.com</code>.</p></li><li><p><strong>LDAP Scope</strong>. This parameter specifies the depth of the search in relation to the starting point: the previous parameter. You have a choice between the following values:</p><ul><li><strong>Base</strong>: to search the entire tree; the base DN will be ignored;</li><li><strong>Subtree</strong>: to search the nodes below the starting point;</li><li><strong>OneLevel</strong>: to search the nodes on the same level as the start node.</li></ul></li><li><p><strong>LDAP Filter</strong>. With this, you can narrow the search down to users or user groups. This will facilitate the search but, more importantly, restricts access to your Container Registry. You can use more than one attribute in the filter, as well as wildcards. A detailed tutorial on writing LDAP filters can be found <a href=https://confluence.atlassian.com/kb/how-to-write-ldap-search-filters-792496933.html>here</a>.</p></li><li><p><strong>LDAP UID</strong>. Every entry in the LDAP has multiple attributes. The LDAP UID parameter specifies which of the attributes must be used as a key to match the user credentials (of the user who tries to log in to the system) with the entries in the tree. Typically, either the <code>uid</code> or the <code>cn</code> attribute are used.</p></li></ul><h3 id=steps-in-the-gui>Steps in the GUI</h3><ul><li>In the navigation pane on the left, select <strong>Administration</strong>;</li><li>Click on <strong>Configuration</strong>;</li><li>Select <strong>Authentication</strong> tab;</li><li>In <strong>Auth Mode</strong>, in the dropdown, select <strong>LDAP/AD</strong>;</li><li>Fill in the form;</li><li>Select if you want to use a server certificate or not by using a checkbox;</li><li><strong>TEST LDAP SERVER</strong> to ensure that you&rsquo;ve entered correct parameters;</li><li>If you see an affirmative message, hit <strong>Save</strong>.</li></ul><p><img src=../ldap_ad.png alt></p><h2 id=ldap-user-groups>LDAP User Groups</h2><p>Optionally, you can create user groups to be able to assign users to projects in bulks in the Container Registry GUI.</p><p>Since an LDAP directory is a tree-like structure, it&rsquo;s naturally hierarchical. Groups are a way to put entities – in our case, users – together independently of that hierarchy. One user can be a member of more than one group.</p><p>On the LDAP/AD server, you need to use the <code>memberof</code> attribute of the entries. If you are new to this technology, look into <a href=https://www.thegeekstuff.com/2015/02/openldap-add-users-groups/>this tutorial</a> that explains how to create groups on the LDAP server and add users into them.</p><p>Once you created LDAP groups on the server, you have to configure group settings in the Container Registry GUI as well. You also cannot leave these settings empty if there are groups on your LDAP server.</p><p>The parameters are similar to those in the general server configuration.</p><ul><li><p><strong>LDAP Group Base DN</strong>. Like <em>LDAP Search DN</em>, it specifies a starting point in the tree structure of nodes/entries with user accounts and other records, with the only difference that this parameter may rather refer to a group or organizational unit name. For the latter, use the <code>ou</code> attribute.</p></li><li><p><strong>LDAP Group Filter</strong>. Like <em>LDAP Filter</em>, it limits the search to certain nodes. First of all, you need to specify that you want to search only within groups and not all other nodes. If you use OpenLDAP, the filter is <code>objectclass=groupOfNames</code>. If you use Active Directory, apply the <code>objectclass=group</code> filter. In addition to that, you can use other LDAP attributes to make your search more precise.</p></li><li><p><strong>LDAP Group GUID</strong>. This parameter specifies which attribute of a node is reserved for the name of the group. Typically, this would be <code>cn</code>.</p></li><li><p><strong>LDAP Group Admin DN</strong>. In this field, you can enter the distinguished name of an LDAP/AD group the members of which will all be granted system admin access rights for your Container Registry instance.</p></li><li><p><strong>LDAP Group Membership</strong>. This is also an attribute of a node but this attribute applies to the nodes holding user accounts. Thus, it specifies which attribute should the search look at to identify of which group the user is a member of. The default node attribute that identifies group membership is <code>memberof</code>.</p></li><li><p><strong>LDAP Scope</strong>. Identical to the <em>LDAP Scope</em> mentioned before but applies to the group nodes.</p></li></ul><p><img src=../ldap_ad_groups.png alt></p></div></div></div></div></div><div class=footer><div class=container><div class=row><div class=col-12><h3 class=footer-title>Container Registry</h3></div></div></div></div><div class=footer-second><div class=container><div class=row><div class=col-12><div class=footer-second-menu><div class=row><div class="col-12 col-md-3"><h3>Site</h3><div class=menu-footer-primary><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-features><a href=/#features><span>Features</span></a></li><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Services</h3><div class=menu-footer-secondary><ul><li class=menu-item-customer-portal><a id=customer-portal href=javascript:void(0) data-billsby-type=account>Customer Portal</a></li><li class=menu-item-free-container-registry-c8n><a href=https://c8n.io><span>Free Container Registry C8N</span></a></li><li class=menu-item-container-registry-on-exoscale><a href=/exoscale><span>Container Registry on Exoscale</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Support</h3><div class=menu-footer-secondary><ul><li class="menu-item-knowledge base"><a href=/docs/><span>Knowledge Base</span></a></li><li class="menu-item-privacy policy"><a href=/privacy/><span>Privacy Policy</span></a></li><li class="menu-item-terms of service"><a href=/terms-of-service/><span>Terms of Service</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Social</h3><div class=menu-footer-social><ul class=d-flex><li class="menu-item-social mr-1"><a href=https://twitter.com/ContainerRgstry target=_blank><i class="fab fa-twitter"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.reddit.com/r/docker/ target=_blank><i class="fab fa-reddit-alien"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.linkedin.com/showcase/container-registry target=_blank><i class="fab fa-linkedin"></i></a></li><li class="menu-item-social mr-1"><a href=/contact/ target=_blank><i class="far fa-envelope"></i></a></li></ul></div></div></div></div></div></div></div></div><div class=footer-third><div class=container><div class=row><div class=col-12><div class=text-white>©Copyright - Container Registry by 8gears Ltd</div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/bundle.min.ffa41510acb10d38f64746ae47d6e936604c406f9cd1cf0cb5bc3fef4bc31b56.js></script><script>function toggleDocs(){document.querySelector('.docs_sidebar').classList.toggle('open'),document.querySelector('body').classList.toggle('lock-scroll')}document.querySelector('#menu-docs').addEventListener('click',toggleDocs)</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-179953813-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-179953813-1',{link_attribution:!0})</script><script type=text/javascript id=hs-script-loader async src=//js.hs-scripts.com/7006577.js></script></body></html>