<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Preheat Images - Container Registry</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://container-registry.com/favicon.png><link rel=apple-touch-icon sizes=180x180 href=https://container-registry.com//favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://container-registry.com//favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://container-registry.com//favicon/favicon-16x16.png><link rel=manifest href=https://container-registry.com//favicon/site.webmanifest><link rel=mask-icon href=https://container-registry.com//favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=https://container-registry.com//favicon/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="https://container-registry.com//favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;500&family=Open+Sans&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.min.5bb2f1d3c72013a9130ae6c939afca2015daa440363a2897dc32570628fdb6b4.css><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P2NXZV4');</script></head><body class="page page-docs-single"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2NXZV4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-features><a href=/#features><span>Features</span></a></li><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-blog><a href=/posts/><span>Blog</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></li></ul></div><div id=header class="header header-fixed"><div class=container><div class=logos><div class=logo><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert><a href=https://container-registry.com/><img height=70px width=70px alt="Container Registry Logo" src=/img/logo-white.svg></a></div><div class=logo-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo.svg></a></div><div class=logo-invert-mobile><a href=https://container-registry.com/><img height=64px width=64px alt="Container Registry Logo" src=/img/logo-white.svg></a></div></div><div class="docs_search search_parent"><div class=docs_search--field id=searchbox></div><div class=docs_search--result id=hits></div></div><div class=main-menu><ul><li class=menu-item-features><a href=/#features><span>Features</span></a><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a><li class=menu-item-faq><a href=/faq/><span>FAQ</span></a><li class=menu-item-about><a href=/about/><span>About</span></a><li class=menu-item-blog><a href=/posts/><span>Blog</span></a><li class=menu-item-contact><a href=/contact/><span>Contact</span></a><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></ul></div><div id=toggle-main-menu-mobile class=menu-trigger><button class=hamburger>Menu</button></div></div></div><div id=wrapper class=wrapper><div class=docs_section><div class=container><div class="row align-items-start"><div class="col-md-3 docs_sidebar"><div class=docs_sidebar-item><a class="docs_sidebar-name active" href=https://container-registry.com/docs/user-manual/>User Manual</a><ul class=docs_menu><li><a href=https://container-registry.com/docs/user-manual/why-use-container-registry/>Why Use Container Registry</a></li><li><a href=https://container-registry.com/docs/user-manual/what-is-harbor/>What Is Harbor?</a></li><li><a href=https://container-registry.com/docs/user-manual/container-registry-user-interface-a-short-overview/>Container Registry User Interface: A Short Overview</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/>Working With Projects</a></li><ul class=docs_submenu><li><a href=https://container-registry.com/docs/user-manual/projects/repositories/>Repositories</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/managing-project-users/>Managing Project Users</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/configuration/>Project Configuration</a></li><ul class=docs_submenu><li><a href=https://container-registry.com/docs/user-manual/projects/configuration/preheat-images/>Preheat Images</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/configuration/robot-accounts/>Robot Accounts</a></li><li><a href=https://container-registry.com/docs/user-manual/projects/configuration/webhooks/>Webhooks</a></li></ul></ul><li><a href=https://container-registry.com/docs/user-manual/images/>Working With Artifacts</a></li><li><a href=https://container-registry.com/docs/user-manual/working-with-logs/>Working With Logs</a></li><li><a href=https://container-registry.com/docs/user-manual/dedicated-vs-individual-account/>Dedicated vs Individual Account</a></li><li><a href=https://container-registry.com/docs/user-manual/double-starred-patterns/>Double-Starred Patterns</a></li></ul></div><div class=docs_sidebar-item><a class=docs_sidebar-name href=https://container-registry.com/docs/getting-started-guide/>Getting Started Guide</a></div><div class=docs_sidebar-item><a class=docs_sidebar-name href=https://container-registry.com/docs/administration-manual/>Administration Manual</a></div><div class=docs_sidebar-item><a class=docs_sidebar-name href=https://container-registry.com/docs/user-guide/>User Guides</a></div></div><div class="col-md-8 offset-md-1 docs_content content"><h1 id=preheat-images-p2p-preheat-policies>Preheat Images: P2P Preheat Policies</h1><h1 id=introduction-to-p2p-preheat-how-it-works>Introduction to P2P Preheat: How It Works</h1><p>Peer-to-peer (or P2P) networks are file sharing systems that do not involve a server. A peer is a computer in such a network. A seeder provides files for a leecher. The seeder uploads and the leecher downloads them. These two operations happen simulteneously, and the files go directly from one peer to the other.</p><p>Although there is no server, there is a managing software that coordinates uploads and downloads and keeps a record of which files are available for download and from which seeder. This service is also announces - or <em>preheats</em> - the arrival of new files, in this case, new Docker images. The P2P software may run on a server but it won&rsquo;t upload any files on it.</p><p>In Container Registry, you can configure P2P preheat by specifying which images should be preheated and with what reguylarity this should happen. These rules are called <strong>P2P preheat policies</strong>. They will put certain images on a <em>candidate list</em>: a list of potential seeders. When a leecher will request an image, the P2P software will go through the suitable images and help the leecher in downloading the first available image on the candidate list.</p><p>Harbor has integrations with the two most popular providers of P2P service: <a href=https://d7y.io/en-us/>Dragonfly</a> and <a href=https://github.com/uber/kraken>Kraken</a>.</p><h1 id=prerequisites>Prerequisites</h1><p>P2P preheat provider instances must be enabled at the system-level by your system administrator as described <a href>here</a>.</p><h1 id=create-a-new-p2p-preheat-policy>Create a New P2P Preheat Policy</h1><ul><li>Inside a project, go to <strong>P2P Preheat</strong> tab;</li><li>Click <strong>+ NEW POLICY</strong>;</li><li>Fill in the mask:</li><li>Select an instance from the list of available instances;</li><li>Give your policy a name and description;</li><li>Create <em>Filters</em>;</li><li>Add <em>Triggers</em>.</li></ul><p><img src=../new_preheat_policy.png alt></p><h2 id=filters-for-p2p-preheating>Filters for P2P Preheating</h2><p>You can set which images should be announced on the network by using:</p><ul><li>repository names;</li><li>image tags;</li><li>image labels.</li></ul><h3 id=filter-by-repository>Filter by Repository</h3><ul><li>To select <em>all</em> repositories in the project, enter a double start/asterisk (**);<ul><li>The same effect will be achieved if you type the project name with only one star at the end: <code>project*</code>;</li></ul></li><li>To select certain repositories, type in a repository name with a star at the end of it;</li><li>To enter multiple repositories, separate the entries with commas: <code>test*, test_slack*</code>.</li></ul><h2 id=filter-by-tags>Filter by Tags</h2><ul><li>To select <em>all</em> tags in the project, enter a double start/asterisk (**);</li><li>To select tags matching a string pattern use <a href=https://preview.container-registry.com/docs/user-manual/double-starred-patterns/>this method</a>;</li></ul><ul><li>To enter multiple tags, separate the entries with commas: <code>test*, test_slack*</code>.</li></ul><h2 id=filter-by-labels>Filter by Labels</h2><p>To filter by labels, you need to put their complete names. To use more than one label, separate them by comma.</p><hr><p><strong>NOTE</strong></p><p>If you put more than one labels into your preheat policy, only the images that have <em>all</em> these labels will be preheated.</p><hr><h2 id=triggers-for-p2p-preheating>Triggers for P2P Preheating</h2><p>Even if you set the filters, the preheat will only happen if a trigger fires. You can set the type of such trigger for each preheat policy. The first two are disconnected from the events occuring in your project. The third one is bound to such events.</p><h3 id=manual-preheat-trigger>Manual Preheat trigger</h3><p>It is not an actual trigger, you will need to <em>execute</em> the policy manually every time you need to run a preheat.
To do this, after creating the policy, still in the P2P Preheat tab</p><ul><li>Select a policy;</li><li>Click <strong>Action</strong>;</li><li>Click <strong>Execute</strong>.</li></ul><h3 id=scheduled-preheat>Scheduled Preheat</h3><p>Regardless of whether new images were pushed or not, they will be preheated only when this is not yet the time for it; it only happenes upon the set schedule;
* You can select between a simple schedule, based on a time interval, or create your <strong>custom schedule</strong> using [CRON format](cron format)</p><p><img src=../scheduled_preheat_trigger.png alt></p><p>Hover over the <em>i</em> icon to display our CRON cheatsheet.</p><p><img src=../cron.png alt></p><h3 id=event-based-preheat-trigger>Event-Based Preheat Trigger</h3><p>If you select this type of trigger, the policy will be executed every time one of the following happens to an <em>artifact/image</em>:</p><ul><li>An Artifact is pushed;</li><li>An Artifact is labeled but not when a label is removed;</li><li>An Artifact is scanned but not when the scan failed.</li></ul><p><img src=../event_based_preheat_trigger.png alt></p></div></div></div></div></div><div class=footer><div class=container><div class=row><div class=col-12><h3 class=footer-title>Container Registry</h3></div></div></div></div><div class=footer-second><div class=container><div class=row><div class=col-12><div class=footer-second-menu><div class=row><div class="col-12 col-md-3"><h3>Site</h3><div class=menu-footer-primary><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-features><a href=/#features><span>Features</span></a></li><li class=menu-item-pricing><a href=/#pricing><span>Pricing</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li><li class=menu-item-jobs><a href=https://www.notion.so/8gears/Full-Stack-Software-Engineer-Python-Vue-Alpine-Container-a9a7d93f8a6b4e32b1caa11be1836810><span>Jobs</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Services</h3><div class=menu-footer-secondary><ul><li class="menu-item-customer portal"><a id=customer-portal href=javascript:void(0) data-billsby-type=account>Customer Portal</a></li><li class="menu-item-c8n free regsitry"><a href=https://c8n.io><span>C8N Free Regsitry</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Support</h3><div class=menu-footer-secondary><ul><li class="menu-item-privacy policy"><a href=/privacy/><span>Privacy Policy</span></a></li><li class="menu-item-terms of service"><a href=/terms-of-service/><span>Terms of Service</span></a></li></ul></div></div><div class="col-12 col-md-3"><h3>Social</h3><div class=menu-footer-social><ul class=d-flex><li class="menu-item-social mr-1"><a href=https://twitter.com/ContainerRgstry target=_blank><i class="fab fa-twitter"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.reddit.com/r/docker/ target=_blank><i class="fab fa-reddit-alien"></i></a></li><li class="menu-item-social mr-1"><a href=https://www.linkedin.com/showcase/container-registry target=_blank><i class="fab fa-linkedin"></i></a></li><li class="menu-item-social mr-1"><a href=/contact/ target=_blank><i class="far fa-envelope"></i></a></li></ul></div></div></div></div></div></div></div></div><div class=footer-third><div class=container><div class=row><div class=col-12><div class=text-white>Â©Copyright - Container Registry by 8gears Ltd</div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js></script><script type=text/javascript src=/js/bundle.min.0badd4c1778bb1d3e6632a64cb596ad2129bf65564e35bf4cdd2e2f3215b8d81.js></script><script>const queryString=window.location.search;const urlParams=new URLSearchParams(queryString);const custom_domain=urlParams.get('cd');for(const elem of document.getElementsByName("cd_url")){elem.textContent=custom_domain!=undefined?custom_domain:"c8n.io";};</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-179953813-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-179953813-1',{'link_attribution':true});</script><script type=text/javascript id=hs-script-loader async src=//js.hs-scripts.com/7006577.js></script></body></html>